# ======================================================= #
# Ash-Vigil v5.0 Environment Variables Template
# ======================================================= #
# FILE VERSION: v5.1-6-6.3-2
# LAST MODIFIED: 2026-02-14
# CLEAN ARCHITECTURE: Compliant
# Repository: https://github.com/the-alphabet-cartel/ash-vigil
# Community: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org
#
# USAGE:
#   1. Copy this file to .env
#   2. Modify values as needed
#   3. Environment variables OVERRIDE JSON config defaults
#
# ⚠️  SECRETS WARNING:
#   Do NOT put API tokens or passwords in this file!
#   Use Docker Secrets instead: ./secrets/
#   See secrets/README.md for setup instructions
#
# ------------------------------------------------------- #
# VARIABLE_NAME=value                                     # Description (default: X)
# Comments regarding use of previous variable
# More comments
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# GLOBAL VARIABLES
# ======================================================= #
# ------------------------------------------------------- #
# USER/GROUP ID
# ------------------------------------------------------- #
# Set these to match your host user for correct file permissions.
# Find your IDs by running 'id' on your host system.
#
# Example output: uid=1000(PapaBearDoes) gid=1000(PapaBearDoes) ...
#   PUID=1000
#   PGID=1000
# ------------------------------------------------------- #
PUID=1000                                                 # User ID to run container as (default: 1000)
PGID=1000                                                 # Group ID to run container as (default: 1000)
# ------------------------------------------------------- #
# TIMEZONE - Used by Docker and the application
# ------------------------------------------------------- #
TZ=America/Los_Angeles                                    # Server timezone (default: UTC)
# ------------------------------------------------------- #
# COLOR OUTPUT
# ------------------------------------------------------- #
FORCE_COLOR=1                                             # Force Color Logging for Non-TTY displays (I'm looking at you PuTTY!)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ASH-VIGIL CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# SERVER CONFIGURATION
# ------------------------------------------------------- #
VIGIL_ENVIRONMENT=production                              # Environment: production, development (default: production)
VIGIL_HOST=0.0.0.0                                        # Host to bind to (default: 0.0.0.0)
VIGIL_PORT=30882                                          # Port to listen on (default: 30882)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# LOGGING CONFIGURATION
# ------------------------------------------------------- #
VIGIL_LOG_LEVEL=INFO                                      # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
VIGIL_LOG_FORMAT=human                                    # Log format: human, json (default: human)
VIGIL_LOG_FILE=/app/logs/ash-vigil.log                    # Log output file path (default: /app/logs/ash-vigil.log)
VIGIL_LOG_CONSOLE=true                                    # Enable console logging (default: true)
VIGIL_LOG_COLORIZE=true                                   # Enable colorized output (default: true)
# ------------------------------------------------------- #
# MODEL CONFIGURATION
# ------------------------------------------------------- #
VIGIL_MODEL_NAME=facebook/bart-large-mnli                 # HuggingFace model for risk detection (default: facebook/bart-large-mnli)
VIGIL_MODEL_TYPE=zero-shot                                # Model type: zero-shot, classifier (default: zero-shot)
VIGIL_MODEL_DEVICE=cuda                                   # Device for inference: cuda, cpu (default: cuda)
VIGIL_MODEL_MAX_LENGTH=512                                # Maximum token length (default: 512)
VIGIL_MODEL_CACHE_DIR=/app/models-cache                   # Model cache directory (default: /app/models-cache)
# ------------------------------------------------------- #
# INFERENCE CONFIGURATION
# ------------------------------------------------------- #
VIGIL_BATCH_SIZE=50                                        # Inference batch size (default: 50)
VIGIL_TIMEOUT=30                                          # Inference timeout in seconds (default: 30)
# ------------------------------------------------------- #
# ------------------------------------------------------- #
# RISK SCORE THRESHOLDS
# ------------------------------------------------------- #
# Score-to-label mapping thresholds. After calculating the
# risk score, these determine the final risk classification.
# ------------------------------------------------------- #
VIGIL_THRESHOLD_HIGH_RISK=0.65                            # Min score for high_risk label (default: 0.65)
VIGIL_THRESHOLD_MODERATE_RISK=0.45                        # Min score for moderate_risk label (default: 0.45)
VIGIL_THRESHOLD_LOW_RISK=0.25                             # Min score for low_risk label (default: 0.25)
# ------------------------------------------------------- #
# SCORING FORMULA WEIGHTS
# ------------------------------------------------------- #
# Ratio-based formula:
#   risk_signal = high_risk_max * W_high + moderate_risk_max * W_moderate
#   safe_signal = safe_max * W_safe + low_risk_max * W_low
#   risk_score  = max(0.0, risk_signal - safe_signal)
#
# Increase risk weights to catch more crisis content.
# Increase safe weights to reduce false positives.
# ------------------------------------------------------- #
VIGIL_SCORING_WEIGHT_HIGH_RISK=1.0                        # Risk signal weight for high_risk category (default: 1.0)
VIGIL_SCORING_WEIGHT_MODERATE_RISK=0.7                    # Risk signal weight for moderate_risk category (default: 0.7)
VIGIL_SCORING_WEIGHT_SAFE=1.0                             # Safe signal weight for safe category (default: 1.0)
VIGIL_SCORING_WEIGHT_LOW_RISK=0.4                         # Safe signal weight for low_risk category (default: 0.4)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ⚠️  SECRETS REMINDER
# ======================================================= #
# Do NOT put secrets in this file! Use Docker Secrets:
#
# Required:
#   secrets/huggingface_token  - HuggingFace API Token for gated model access
#
# Optional:
#   secrets/ash_vigil_discord_alert_token  - Discord webhook URL for system alerts
#
# Example:
#   echo "your-hf-token" > secrets/huggingface_token
#   chmod 600 secrets/huggingface_token
#
# See secrets/README.md for full instructions
# ======================================================= #


# ======================================================= #
# END OF CONFIGURATION
# ======================================================= #
